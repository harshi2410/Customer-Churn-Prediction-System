<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìû Telco Churn Predictor | Full Stack ML App</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìû</text></svg>">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>üìû Telco Customer Churn Predictor</h1>
            <p class="subtitle">Predict customer churn risk using Machine Learning</p>
        </header>

        <!-- Prediction Form -->
        <form method="POST" action="/predict" class="churn-form">
            
            <!-- Section 1: Personal Information -->
            <section class="form-section">
                <h2 class="section-title">üë§ Personal Information</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="gender">Gender</label>
                        <select id="gender" name="gender" required>
                            <option value="Female">Female</option>
                            <option value="Male">Male</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="SeniorCitizen">Senior Citizen</label>
                        <select id="SeniorCitizen" name="SeniorCitizen" required>
                            <option value="0">No</option>
                            <option value="1">Yes</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="Partner">Partner</label>
                        <select id="Partner" name="Partner" required>
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="Dependents">Dependents</label>
                        <select id="Dependents" name="Dependents" required>
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                        </select>
                    </div>
                </div>
            </section>

            <!-- Section 2: Phone Services -->
            <section class="form-section">
                <h2 class="section-title">üì± Phone Services</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="PhoneService">Phone Service</label>
                        <select id="PhoneService" name="PhoneService" required>
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="MultipleLines">Multiple Lines</label>
                        <select id="MultipleLines" name="MultipleLines" required>
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                            <option value="No phone service">No phone service</option>
                        </select>
                    </div>
                </div>
            </section>

            <!-- Section 3: Internet Services -->
            <section class="form-section">
                <h2 class="section-title">üåê Internet Services</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="InternetService">Internet Service</label>
                        <select id="InternetService" name="InternetService" required>
                            <option value="DSL">DSL</option>
                            <option value="Fiber optic">Fiber optic</option>
                            <option value="No">No internet service</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="OnlineSecurity">Online Security</label>
                        <select id="OnlineSecurity" name="OnlineSecurity" required>
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                            <option value="No internet service">No internet service</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="OnlineBackup">Online Backup</label>
                        <select id="OnlineBackup" name="OnlineBackup" required>
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                            <option value="No internet service">No internet service</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="DeviceProtection">Device Protection</label>
                        <select id="DeviceProtection" name="DeviceProtection" required>
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                            <option value="No internet service">No internet service</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="TechSupport">Tech Support</label>
                        <select id="TechSupport" name="TechSupport" required>
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                            <option value="No internet service">No internet service</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="StreamingTV">Streaming TV</label>
                        <select id="StreamingTV" name="StreamingTV" required>
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                            <option value="No internet service">No internet service</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="StreamingMovies">Streaming Movies</label>
                        <select id="StreamingMovies" name="StreamingMovies" required>
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                            <option value="No internet service">No internet service</option>
                        </select>
                    </div>
                </div>
            </section>

            <!-- Section 4: Account Information -->
            <section class="form-section">
                <h2 class="section-title">üíº Account Information</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="tenure">Tenure (months)</label>
                        <input type="number" id="tenure" name="tenure" min="0" value="10" required>
                        <small>How long has the customer been with the company?</small>
                    </div>

                    <div class="form-group">
                        <label for="Contract">Contract Type</label>
                        <select id="Contract" name="Contract" required>
                            <option value="Month-to-month">Month-to-month</option>
                            <option value="One year">One year</option>
                            <option value="Two year">Two year</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="PaperlessBilling">Paperless Billing</label>
                        <select id="PaperlessBilling" name="PaperlessBilling" required>
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="PaymentMethod">Payment Method</label>
                        <select id="PaymentMethod" name="PaymentMethod" required>
                            <option value="Electronic check">Electronic check</option>
                            <option value="Mailed check">Mailed check</option>
                            <option value="Bank transfer (automatic)">Bank transfer (automatic)</option>
                            <option value="Credit card (automatic)">Credit card (automatic)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="MonthlyCharges">Monthly Charges ($)</label>
                        <input type="number" id="MonthlyCharges" name="MonthlyCharges" step="0.01" min="0" value="70.00" required>
                    </div>

                    <div class="form-group">
                        <label for="TotalCharges">Total Charges ($)</label>
                        <input type="number" id="TotalCharges" name="TotalCharges" step="0.01" min="0" value="700.00" required>
                        <small>Total amount charged to the customer</small>
                    </div>
                </div>
            </section>

            <!-- Submit Button -->
            <div class="form-actions">
                <button type="submit" class="btn-submit">
                    üîç Predict Churn Risk
                </button>
            </div>
        </form>

        <!-- Prediction Result -->
        {% if prediction %}
        <div class="prediction-result {{ css_class }}">
            <div class="result-icon">
                {% if css_class == 'high' %}
                    üî¥
                {% elif css_class == 'medium' %}
                    üü†
                {% elif css_class == 'low' %}
                    üü¢
                {% else %}
                    ‚ö†Ô∏è
                {% endif %}
            </div>
            <h3 class="result-title">{{ prediction }}</h3>
            {% if probability %}
            <div class="result-probability">
                Churn Probability: <strong>{{ probability }}</strong>
            </div>
            {% endif %}
            
            <div class="result-actions">
                <button onclick="window.location.reload()" class="btn-reset">
                    üîÑ Predict Another Customer
                </button>
            </div>
        </div>
        {% endif %}

        <!-- Footer -->
        <footer class="footer">
            <p>Powered by Random Forest ML Model ‚Ä¢ Full Stack Application</p>
            <p class="footer-meta">Built with Flask ‚Ä¢ scikit-learn ‚Ä¢ HTML/CSS</p>
        </footer>
    </div>
</body>
</html>